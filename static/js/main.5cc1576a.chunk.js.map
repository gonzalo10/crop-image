{"version":3,"sources":["styles.js","utils.js","crop-selection.js","image-crop.js","index.js"],"names":["Handler","styled","div","NorthPoint","NorthWestPoint","NorthEastPoint","EastPoint","SouthEastPoint","SouthPoint","SouthWestPoint","WestPoint","CropSelectionWrapper","CropWrapper","CropImageWrapper","img","straightenYPath","clientX","evData","k","d","ord","cropOffset","cropStartWidth","cropStartHeight","top","left","getClientPos","e","pageX","pageY","touches","x","y","clamp","num","min","max","Math","isCropValid","crop","width","height","isNaN","inverseOrd","convertToPercentCrop","imageWidth","imageHeight","unit","aspect","convertToPixelCrop","CreateCropSelection","props","getCropStyle","onCropAreaMouseDown","handleChangeSelection","getElementOffset","mediaDimensions","refContainer","mouseDownOnCropArea","useRef","disabled","locked","ruleOfThirds","style","pixelCrop","preventDefault","clientPos","target","dataset","xInversed","yInversed","clientStartX","clientStartY","cropStartX","cropStartY","xCrossOver","yCrossOver","startXCrossOver","startYCrossOver","isResize","ref","onMouseDown","onTouchStart","tabIndex","className","data-ord","Fragment","passiveSupported","window","addEventListener","Object","defineProperty","get","err","ReactCrop","document","state","setState","cropIsActive","onComponentMouseDown","keepSelection","onChange","componentEl","mediaWrapperRef","firstChild","contains","mediaOffset","mouseXPosInImage","mouseYPosInImage","nextCrop","undefined","newCropIsBeingDrawn","onDocMouseMove","onDragStart","dragStarted","xDiff","yDiff","resizeCrop","dragCrop","onDocMouseEnd","onComplete","onDragEnd","this","options","passive","onDocMouseTouchMove","onDocMouseTouchEnd","addEventListeners","removeEventListener","removeEventListeners","documentElement","clientTop","clientLeft","pageYOffset","pageXOffset","el","rect","getBoundingClientRect","doc","getDocumentOffset","win","getWindowOffset","makeNewCrop","newHeight","minWidth","maxWidth","minHeight","maxHeight","newWidth","abs","xDiffPc","yDiffPc","newSize","getNewSize","newX","newY","lastYCrossover","containedCrop","prevCrop","prevPixelCrop","contained","adjustedForX","adjustedForY","containCrop","xyOrds","indexOf","xOrds","yOrds","swapXOrd","swapYOrd","inversedXOrd","inversedYOrd","crossOverCheck","defaultCrop","children","crossorigin","imageAlt","onImageError","renderComponent","src","imageStyle","onImageLoaded","n","componentRef","r","imageRef","crossOrigin","onLoad","onError","alt","clientWidth","clientHeight","PureComponent","nudgeStep","nudgeStepLarge","defaultProps","circularCrop","renderSelectionAddon","App","onSelectFile","files","length","reader","FileReader","result","readAsDataURL","onCropComplete","makeClientCrop","onCropChange","percentCrop","getCroppedImg","croppedImageUrl","image","fileName","canvas","createElement","scaleX","naturalWidth","scaleY","naturalHeight","getContext","drawImage","Promise","resolve","reject","toBlob","blob","name","URL","revokeObjectURL","fileUrl","createObjectURL","console","error","type","accept","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.5cc1576a.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nconst Handler = styled.div`\n\tposition: absolute;\n\twidth: 10px;\n\theight: 10px;\n\tbackground-color: rgba(0, 0, 0, 0.2);\n\tborder: 1px solid rgba(255, 255, 255, 0.7);\n\tbox-sizing: border-box;\n\toutline: 1px solid transparent;\n`;\n\nexport const NorthPoint = styled(Handler)`\n\ttop: 0;\n\tleft: 50%;\n\tmargin-top: -5px;\n\tmargin-left: -5px;\n\tcursor: n-resize;\n`;\nexport const NorthWestPoint = styled(Handler)`\n\ttop: 0;\n\tleft: 0;\n\tmargin-top: -5px;\n\tmargin-left: -5px;\n\tcursor: nw-resize;\n`;\nexport const NorthEastPoint = styled(Handler)`\n\ttop: 0;\n\tright: 0;\n\tmargin-top: -5px;\n\tmargin-right: -5px;\n\tcursor: ne-resize;\n`;\nexport const EastPoint = styled(Handler)`\n\ttop: 50%;\n\tright: 0;\n\tmargin-top: -5px;\n\tmargin-right: -5px;\n\tcursor: e-resize;\n`;\nexport const SouthEastPoint = styled(Handler)`\n\tbottom: 0;\n\tright: 0;\n\tmargin-bottom: -5px;\n\tmargin-right: -5px;\n\tcursor: se-resize;\n`;\nexport const SouthPoint = styled(Handler)`\n\tbottom: 0;\n\tleft: 50%;\n\tmargin-bottom: -5px;\n\tmargin-left: -5px;\n\tcursor: s-resize;\n`;\nexport const SouthWestPoint = styled(Handler)`\n\tbottom: 0;\n\tleft: 0;\n\tmargin-bottom: -5px;\n\tmargin-left: -5px;\n\tcursor: sw-resize;\n`;\nexport const WestPoint = styled(Handler)`\n\ttop: 50%;\n\tleft: 0;\n\tmargin-top: -5px;\n\tmargin-left: -5px;\n\tcursor: w-resize;\n`;\n\nexport const CropSelectionWrapper = styled.div`\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\ttransform: translate3d(0, 0, 0);\n\tbox-sizing: border-box;\n\tcursor: move;\n\tbox-shadow: 0 0 0 9999em rgba(0, 0, 0, 0.5);\n\ttouch-action: manipulation;\n\tborder: 1px solid;\n\tborder-image-source: url('data:image/gif;base64,R0lGODlhCgAKAJECAAAAAP///////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEI5RDc5MTFDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEI5RDc5MTBDNkE2MTFFM0JCMDZEODI2QTI4MzJBOTIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyODAxMTc0MDcyMDY4MTE4MDgzQzNDMjA5MzREQ0ZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoAAgAsAAAAAAoACgAAAhWEERkn7W3ei7KlagMWF/dKgYeyGAUAIfkEBQoAAgAsAAAAAAoACgAAAg+UYwLJ7RnQm7QmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYgLJHdiinNSAVfOEKoUCACH5BAUKAAIALAAAAAAKAAoAAAIRVISAdusPo3RAzYtjaMIaUQAAIfkEBQoAAgAsAAAAAAoACgAAAg+MDiem7Q8bSLFaG5il6xQAIfkEBQoAAgAsAAAAAAoACgAAAg+UYRLJ7QnQm7SmsCyVKhUAIfkEBQoAAgAsAAAAAAoACgAAAhCUYBLJDdiinNSEVfOEKoECACH5BAUKAAIALAAAAAAKAAoAAAIRFISBdusPo3RBzYsjaMIaUQAAOw==');\n\tborder-image-slice: 1;\n\tborder-image-repeat: repeat;\n`;\n\nexport const CropWrapper = styled.div`\n\tposition: relative;\n\tcursor: crosshair;\n\toverflow: hidden;\n\tmax-width: 100%;\n\tdisplay: block;\n\ttouch-action: manipulation;\n`;\n\nexport const CropImageWrapper = styled.img`\n\tposition: relative;\n\tdisplay: inline-block;\n\tcursor: crosshair;\n\toverflow: hidden;\n\tmax-width: 100%;\n\t&:focus {\n\t\toutline: none;\n\t}\n\tdisplay: block;\n\tmax-width: 100%;\n\ttouch-action: manipulation;\n`;\n","export const addEventListeners = (\n\tdocument,\n\tonDocMouseTouchMove,\n\tonDocMouseTouchEnd,\n\toptions\n) => {\n\tdocument.addEventListener('mousemove', onDocMouseTouchMove, options);\n\tdocument.addEventListener('touchmove', onDocMouseTouchMove, options);\n\tdocument.addEventListener('mouseup', onDocMouseTouchEnd, options);\n\tdocument.addEventListener('touchend', onDocMouseTouchEnd, options);\n\tdocument.addEventListener('touchcancel', onDocMouseTouchEnd, options);\n};\nexport const removeEventListeners = (\n\tdocument,\n\tonDocMouseTouchMove,\n\tonDocMouseTouchEnd\n) => {\n\tdocument.removeEventListener('mousemove', onDocMouseTouchMove);\n\tdocument.removeEventListener('touchmove', onDocMouseTouchMove);\n\tdocument.removeEventListener('mouseup', onDocMouseTouchEnd);\n\tdocument.removeEventListener('touchend', onDocMouseTouchEnd);\n\tdocument.removeEventListener('touchcancel', onDocMouseTouchEnd);\n};\n\nexport const crossOverCheck = (evData, props) => {\n\tconst { minWidth, minHeight } = props;\n\tif (\n\t\t!minWidth &&\n\t\t((!evData.xCrossOver &&\n\t\t\t-Math.abs(evData.cropStartWidth) - evData.xDiff >= 0) ||\n\t\t\t(evData.xCrossOver &&\n\t\t\t\t-Math.abs(evData.cropStartWidth) - evData.xDiff <= 0))\n\t) {\n\t\tevData.xCrossOver = !evData.xCrossOver;\n\t}\n\n\tif (\n\t\t!minHeight &&\n\t\t((!evData.yCrossOver &&\n\t\t\t-Math.abs(evData.cropStartHeight) - evData.yDiff >= 0) ||\n\t\t\t(evData.yCrossOver &&\n\t\t\t\t-Math.abs(evData.cropStartHeight) - evData.yDiff <= 0))\n\t) {\n\t\tevData.yCrossOver = !evData.yCrossOver;\n\t}\n\n\tconst swapXOrd = evData.xCrossOver !== evData.startXCrossOver;\n\tconst swapYOrd = evData.yCrossOver !== evData.startYCrossOver;\n\n\tevData.inversedXOrd = swapXOrd ? inverseOrd(evData.ord) : false;\n\tevData.inversedYOrd = swapYOrd ? inverseOrd(evData.ord) : false;\n\treturn evData;\n};\n\nexport const straightenYPath = (clientX, evData) => {\n\tconst { ord } = evData;\n\tconst { cropOffset, cropStartWidth, cropStartHeight } = evData;\n\tlet k;\n\tlet d;\n\n\tif (ord === 'nw' || ord === 'se') {\n\t\tk = cropStartHeight / cropStartWidth;\n\t\td = cropOffset.top - cropOffset.left * k;\n\t} else {\n\t\tk = -cropStartHeight / cropStartWidth;\n\t\td = cropOffset.top + (cropStartHeight - cropOffset.left * k);\n\t}\n\n\treturn k * clientX + d;\n};\n\nexport function getClientPos(e) {\n\tlet pageX;\n\tlet pageY;\n\n\tif (e.touches) {\n\t\t[{ pageX, pageY }] = e.touches;\n\t} else {\n\t\t({ pageX, pageY } = e);\n\t}\n\n\treturn {\n\t\tx: pageX,\n\t\ty: pageY,\n\t};\n}\n\nexport function clamp(num, min, max) {\n\treturn Math.min(Math.max(num, min), max);\n}\n\nexport function isCropValid(crop) {\n\treturn (\n\t\tcrop &&\n\t\tcrop.width &&\n\t\tcrop.height &&\n\t\t!isNaN(crop.width) &&\n\t\t!isNaN(crop.height)\n\t);\n}\n\nexport function inverseOrd(ord) {\n\tif (ord === 'n') return 's';\n\tif (ord === 'ne') return 'sw';\n\tif (ord === 'e') return 'w';\n\tif (ord === 'se') return 'nw';\n\tif (ord === 's') return 'n';\n\tif (ord === 'sw') return 'ne';\n\tif (ord === 'w') return 'e';\n\tif (ord === 'nw') return 'se';\n\treturn ord;\n}\n\nexport function convertToPercentCrop(crop, imageWidth, imageHeight) {\n\tif (crop.unit === '%') {\n\t\treturn crop;\n\t}\n\n\treturn {\n\t\tunit: '%',\n\t\taspect: crop.aspect,\n\t\tx: (crop.x / imageWidth) * 100,\n\t\ty: (crop.y / imageHeight) * 100,\n\t\twidth: (crop.width / imageWidth) * 100,\n\t\theight: (crop.height / imageHeight) * 100,\n\t};\n}\n\nexport function convertToPixelCrop(crop, imageWidth, imageHeight) {\n\tif (!crop.unit) {\n\t\treturn { ...crop, unit: 'px' };\n\t}\n\n\tif (crop.unit === 'px') {\n\t\treturn crop;\n\t}\n\n\treturn {\n\t\tunit: 'px',\n\t\taspect: crop.aspect,\n\t\tx: (crop.x * imageWidth) / 100,\n\t\ty: (crop.y * imageHeight) / 100,\n\t\twidth: (crop.width * imageWidth) / 100,\n\t\theight: (crop.height * imageHeight) / 100,\n\t};\n}\n\nexport function resolveCrop(pixelCrop, imageWidth, imageHeight) {\n\tif (!pixelCrop) {\n\t\treturn pixelCrop;\n\t}\n\n\tlet fixedCrop = pixelCrop;\n\tconst widthOverflows = pixelCrop.x + pixelCrop.width > imageWidth;\n\tconst heightOverflows = pixelCrop.y + pixelCrop.height > imageHeight;\n\n\tif (widthOverflows && heightOverflows) {\n\t\tfixedCrop = {\n\t\t\tunit: 'px',\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\twidth: imageWidth > pixelCrop.width ? pixelCrop.width : imageWidth,\n\t\t\theight: imageHeight > pixelCrop.height ? pixelCrop.height : imageHeight,\n\t\t};\n\t} else if (widthOverflows) {\n\t\tfixedCrop = {\n\t\t\t...pixelCrop,\n\t\t\tx: 0,\n\t\t\twidth: imageWidth > pixelCrop.width ? pixelCrop.width : imageWidth,\n\t\t};\n\t} else if (heightOverflows) {\n\t\tfixedCrop = {\n\t\t\t...pixelCrop,\n\t\t\ty: 0,\n\t\t\theight: imageHeight > pixelCrop.height ? pixelCrop.height : imageHeight,\n\t\t};\n\t}\n\n\treturn fixedCrop;\n}\n\nexport function containCrop(prevCrop, crop, imageWidth, imageHeight) {\n\tconst pixelCrop = convertToPixelCrop(crop, imageWidth, imageHeight);\n\tconst prevPixelCrop = convertToPixelCrop(prevCrop, imageWidth, imageHeight);\n\tconst contained = { ...pixelCrop };\n\n\t// Non-aspects are simple\n\tif (!pixelCrop.aspect) {\n\t\tif (pixelCrop.x < 0) {\n\t\t\tcontained.x = 0;\n\t\t\tcontained.width += pixelCrop.x;\n\t\t} else if (pixelCrop.x + pixelCrop.width > imageWidth) {\n\t\t\tcontained.width = imageWidth - pixelCrop.x;\n\t\t}\n\n\t\tif (pixelCrop.y + pixelCrop.height > imageHeight) {\n\t\t\tcontained.height = imageHeight - pixelCrop.y;\n\t\t}\n\n\t\treturn contained;\n\t}\n\n\tlet adjustedForX = false;\n\n\tif (pixelCrop.x < 0) {\n\t\tcontained.x = 0;\n\t\tcontained.width += pixelCrop.x;\n\t\tcontained.height = contained.width / pixelCrop.aspect;\n\t\tadjustedForX = true;\n\t} else if (pixelCrop.x + pixelCrop.width > imageWidth) {\n\t\tcontained.width = imageWidth - pixelCrop.x;\n\t\tcontained.height = contained.width / pixelCrop.aspect;\n\t\tadjustedForX = true;\n\t}\n\n\t// If sizing in up direction we need to pin Y at the point it\n\t// would be at the boundary.\n\tif (adjustedForX && prevPixelCrop.y > contained.y) {\n\t\tcontained.y = pixelCrop.y + (pixelCrop.height - contained.height);\n\t}\n\n\tlet adjustedForY = false;\n\n\tif (contained.y + contained.height > imageHeight) {\n\t\tcontained.height = imageHeight - pixelCrop.y;\n\t\tcontained.width = contained.height * pixelCrop.aspect;\n\t\tadjustedForY = true;\n\t}\n\n\t// If sizing in left direction we need to pin X at the point it\n\t// would be at the boundary.\n\tif (adjustedForY && prevPixelCrop.x > contained.x) {\n\t\tcontained.x = pixelCrop.x + (pixelCrop.width - contained.width);\n\t}\n\n\treturn contained;\n}\n","import React, { useRef } from 'react';\n\nimport {\n\tNorthPoint,\n\tNorthWestPoint,\n\tWestPoint,\n\tNorthEastPoint,\n\tEastPoint,\n\tSouthEastPoint,\n\tSouthPoint,\n\tSouthWestPoint,\n\tCropSelectionWrapper,\n} from './styles';\nimport { getClientPos, convertToPixelCrop } from './utils';\n\nexport const CreateCropSelection = ({\n\tprops,\n\tgetCropStyle,\n\tonCropAreaMouseDown,\n\thandleChangeSelection,\n\tgetElementOffset,\n\tmediaDimensions,\n\tmouseDownOnCropArea,\n}) => {\n\tconst refContainer = useRef(null);\n\tconst { disabled, locked, ruleOfThirds } = props;\n\tconst style = getCropStyle();\n\n\tonCropAreaMouseDown = e => {\n\t\tconst { crop, disabled } = props;\n\t\tconst { width, height } = mediaDimensions;\n\t\tconst pixelCrop = convertToPixelCrop(crop, width, height);\n\n\t\tif (disabled) {\n\t\t\treturn;\n\t\t}\n\t\te.preventDefault(); // Stop drag selection.\n\n\t\tconst clientPos = getClientPos(e);\n\n\t\tconst { ord } = e.target.dataset;\n\t\tconst xInversed = ord === 'nw' || ord === 'w' || ord === 'sw';\n\t\tconst yInversed = ord === 'nw' || ord === 'n' || ord === 'ne';\n\n\t\tlet cropOffset;\n\n\t\tif (pixelCrop.aspect) {\n\t\t\tcropOffset = getElementOffset(refContainer);\n\t\t}\n\n\t\tconst evData = {\n\t\t\tclientStartX: clientPos.x,\n\t\t\tclientStartY: clientPos.y,\n\t\t\tcropStartWidth: pixelCrop.width,\n\t\t\tcropStartHeight: pixelCrop.height,\n\t\t\tcropStartX: xInversed ? pixelCrop.x + pixelCrop.width : pixelCrop.x,\n\t\t\tcropStartY: yInversed ? pixelCrop.y + pixelCrop.height : pixelCrop.y,\n\t\t\txInversed,\n\t\t\tyInversed,\n\t\t\txCrossOver: xInversed,\n\t\t\tyCrossOver: yInversed,\n\t\t\tstartXCrossOver: xInversed,\n\t\t\tstartYCrossOver: yInversed,\n\t\t\tisResize: e.target.dataset.ord,\n\t\t\tord,\n\t\t\tcropOffset,\n\t\t};\n\n\t\thandleChangeSelection(evData);\n\t};\n\n\treturn (\n\t\t<CropSelectionWrapper\n\t\t\tref={refContainer}\n\t\t\tstyle={style}\n\t\t\tonMouseDown={onCropAreaMouseDown}\n\t\t\tonTouchStart={onCropAreaMouseDown}\n\t\t\ttabIndex='0'>\n\t\t\t{!disabled && !locked && (\n\t\t\t\t<div>\n\t\t\t\t\t<div className='ReactCrop__drag-bar ord-n' data-ord='n' />\n\t\t\t\t\t<div className='ReactCrop__drag-bar ord-e' data-ord='e' />\n\t\t\t\t\t<div className='ReactCrop__drag-bar ord-s' data-ord='s' />\n\t\t\t\t\t<div className='ReactCrop__drag-bar ord-w' data-ord='w' />\n\n\t\t\t\t\t<NorthWestPoint data-ord='nw' />\n\t\t\t\t\t<NorthPoint data-ord='n' />\n\t\t\t\t\t<NorthEastPoint data-ord='ne' />\n\t\t\t\t\t<EastPoint data-ord='e' />\n\t\t\t\t\t<SouthEastPoint data-ord='se' />\n\t\t\t\t\t<SouthPoint data-ord='s' />\n\t\t\t\t\t<SouthWestPoint data-ord='sw' />\n\t\t\t\t\t<WestPoint data-ord='w' />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{ruleOfThirds && (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<div className='ReactCrop__rule-of-thirds-hz' />\n\t\t\t\t\t<div className='ReactCrop__rule-of-thirds-vt' />\n\t\t\t\t</React.Fragment>\n\t\t\t)}\n\t\t</CropSelectionWrapper>\n\t);\n};\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { CropWrapper, CropImageWrapper } from './styles';\nimport {\n\tgetClientPos,\n\tclamp,\n\tisCropValid,\n\tconvertToPercentCrop,\n\tconvertToPixelCrop,\n\tcontainCrop,\n\taddEventListeners,\n\tremoveEventListeners,\n\tcrossOverCheck,\n\tstraightenYPath,\n} from './utils';\nimport { CreateCropSelection } from './crop-selection';\n\nlet passiveSupported = false;\n\ntry {\n\twindow.addEventListener(\n\t\t'test',\n\t\tnull,\n\t\tObject.defineProperty({}, 'passive', {\n\t\t\tget: () => {\n\t\t\t\tpassiveSupported = true;\n\t\t\t\treturn true;\n\t\t\t},\n\t\t})\n\t);\n} catch (err) {} // eslint-disable-line no-empty\n\nclass ReactCrop extends PureComponent {\n\twindow = typeof window !== 'undefined' ? window : {};\n\n\tdocument = typeof document !== 'undefined' ? document : {};\n\n\tstate = {};\n\n\tcomponentDidMount() {\n\t\tif (this.document.addEventListener) {\n\t\t\tconst options = passiveSupported ? { passive: false } : false;\n\t\t\taddEventListeners(\n\t\t\t\tthis.document,\n\t\t\t\tthis.onDocMouseMove,\n\t\t\t\tthis.onDocMouseEnd,\n\t\t\t\toptions\n\t\t\t);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (this.document.removeEventListener)\n\t\t\tremoveEventListeners(\n\t\t\t\tthis.document,\n\t\t\t\tthis.onDocMouseMove,\n\t\t\t\tthis.onDocMouseEnd\n\t\t\t);\n\t}\n\n\thandleChangeSelection = evData => {\n\t\tthis.evData = evData;\n\t\tthis.mouseDownOnCropArea = true;\n\t\tthis.setState({ cropIsActive: true });\n\t};\n\n\tonComponentMouseDown = e => {\n\t\tconst { crop, disabled, locked, keepSelection, onChange } = this.props;\n\n\t\t// firstChild to get the wrapping div and not the image\n\t\tconst componentEl = this.mediaWrapperRef.firstChild;\n\n\t\tif (e.target !== componentEl || !componentEl.contains(e.target)) return;\n\t\tif (disabled || locked || (keepSelection && isCropValid(crop))) return;\n\n\t\te.preventDefault(); // Stop drag selection.\n\n\t\tconst clientPos = getClientPos(e);\n\n\t\tconst mediaOffset = this.getElementOffset(this.mediaWrapperRef);\n\t\tconst mouseXPosInImage = clientPos.x - mediaOffset.left;\n\t\tconst mouseYPosInImage = clientPos.y - mediaOffset.top;\n\n\t\tconst nextCrop = {\n\t\t\tunit: 'px',\n\t\t\taspect: crop ? crop.aspect : undefined,\n\t\t\tx: mouseXPosInImage,\n\t\t\ty: mouseYPosInImage,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t};\n\n\t\tthis.evData = {\n\t\t\tclientStartX: clientPos.x,\n\t\t\tclientStartY: clientPos.y,\n\t\t\tcropStartWidth: nextCrop.width,\n\t\t\tcropStartHeight: nextCrop.height,\n\t\t\tcropStartX: nextCrop.x,\n\t\t\tcropStartY: nextCrop.y,\n\t\t\txInversed: false,\n\t\t\tyInversed: false,\n\t\t\txCrossOver: false,\n\t\t\tyCrossOver: false,\n\t\t\tstartXCrossOver: false,\n\t\t\tstartYCrossOver: false,\n\t\t\tisResize: true,\n\t\t\tord: 'nw',\n\t\t};\n\n\t\tthis.mouseDownOnCropArea = true;\n\n\t\tconst { width, height } = this.mediaDimensions;\n\n\t\tonChange(\n\t\t\tconvertToPixelCrop(nextCrop, width, height),\n\t\t\tconvertToPercentCrop(nextCrop, width, height)\n\t\t);\n\n\t\tthis.setState({ cropIsActive: true, newCropIsBeingDrawn: true });\n\t};\n\n\tonDocMouseMove = e => {\n\t\tconst { crop, disabled, onChange, onDragStart } = this.props;\n\n\t\tif (disabled) return;\n\n\t\tif (!this.mouseDownOnCropArea) return;\n\n\t\te.preventDefault(); // Stop drag selection.\n\n\t\tif (!this.dragStarted) {\n\t\t\tthis.dragStarted = true;\n\t\t\tonDragStart(e);\n\t\t}\n\n\t\tconst { evData } = this;\n\t\tconst clientPos = getClientPos(e);\n\n\t\tif (evData.isResize && crop.aspect && evData.cropOffset) {\n\t\t\tclientPos.y = straightenYPath(clientPos.x, this.evData);\n\t\t}\n\t\tevData.xDiff = clientPos.x - evData.clientStartX;\n\t\tevData.yDiff = clientPos.y - evData.clientStartY;\n\n\t\tlet nextCrop;\n\n\t\tif (evData.isResize) nextCrop = this.resizeCrop();\n\t\telse nextCrop = this.dragCrop();\n\n\t\tif (nextCrop !== crop) {\n\t\t\tconst { width, height } = this.mediaDimensions;\n\t\t\tonChange(\n\t\t\t\tconvertToPixelCrop(nextCrop, width, height),\n\t\t\t\tconvertToPercentCrop(nextCrop, width, height)\n\t\t\t);\n\t\t}\n\t};\n\n\tonDocMouseEnd = e => {\n\t\tconst { crop, disabled, onComplete, onDragEnd } = this.props;\n\n\t\tif (disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.mouseDownOnCropArea) {\n\t\t\tthis.mouseDownOnCropArea = false;\n\t\t\tthis.dragStarted = false;\n\n\t\t\tconst { width, height } = this.mediaDimensions;\n\n\t\t\tonDragEnd(e);\n\t\t\tonComplete(\n\t\t\t\tconvertToPixelCrop(crop, width, height),\n\t\t\t\tconvertToPercentCrop(crop, width, height)\n\t\t\t);\n\n\t\t\tthis.setState({ cropIsActive: false, newCropIsBeingDrawn: false });\n\t\t}\n\t};\n\n\tget mediaDimensions() {\n\t\tconst { clientWidth, clientHeight } = this.mediaWrapperRef;\n\t\treturn { width: clientWidth, height: clientHeight };\n\t}\n\n\tgetDocumentOffset() {\n\t\tconst { clientTop = 0, clientLeft = 0 } =\n\t\t\tthis.document.documentElement || {};\n\t\treturn { clientTop, clientLeft };\n\t}\n\n\tgetWindowOffset() {\n\t\tconst { pageYOffset = 0, pageXOffset = 0 } = this.window;\n\t\treturn { pageYOffset, pageXOffset };\n\t}\n\n\tgetElementOffset(el) {\n\t\tconst rect = el.getBoundingClientRect();\n\t\tconst doc = this.getDocumentOffset();\n\t\tconst win = this.getWindowOffset();\n\n\t\tconst top = rect.top + win.pageYOffset - doc.clientTop;\n\t\tconst left = rect.left + win.pageXOffset - doc.clientLeft;\n\n\t\treturn { top, left };\n\t}\n\n\tgetCropStyle() {\n\t\tconst crop = this.makeNewCrop(\n\t\t\tthis.props.crop ? this.props.crop.unit : 'px'\n\t\t);\n\n\t\treturn {\n\t\t\ttop: `${crop.y}${crop.unit}`,\n\t\t\tleft: `${crop.x}${crop.unit}`,\n\t\t\twidth: `${crop.width}${crop.unit}`,\n\t\t\theight: `${crop.height}${crop.unit}`,\n\t\t};\n\t}\n\n\tgetNewSize() {\n\t\tconst { crop, minWidth, maxWidth, minHeight, maxHeight } = this.props;\n\t\tconst { evData } = this;\n\t\tconst { width, height } = this.mediaDimensions;\n\n\t\t// New width.\n\t\tlet newWidth = evData.cropStartWidth + evData.xDiff;\n\n\t\tif (evData.xCrossOver) {\n\t\t\tnewWidth = Math.abs(newWidth);\n\t\t}\n\n\t\tnewWidth = clamp(newWidth, minWidth, maxWidth || width);\n\n\t\t// New height.\n\t\tlet newHeight;\n\n\t\tif (crop.aspect) {\n\t\t\tnewHeight = newWidth / crop.aspect;\n\t\t} else {\n\t\t\tnewHeight = evData.cropStartHeight + evData.yDiff;\n\t\t}\n\n\t\tif (evData.yCrossOver) {\n\t\t\t// Cap if polarity is inversed and the height fills the y space.\n\t\t\tnewHeight = Math.min(Math.abs(newHeight), evData.cropStartY);\n\t\t}\n\n\t\tnewHeight = clamp(newHeight, minHeight, maxHeight || height);\n\n\t\tif (crop.aspect) {\n\t\t\tnewWidth = clamp(newHeight * crop.aspect, 0, width);\n\t\t}\n\n\t\treturn {\n\t\t\twidth: newWidth,\n\t\t\theight: newHeight,\n\t\t};\n\t}\n\n\tdragCrop() {\n\t\tconst nextCrop = this.makeNewCrop();\n\t\tconst { evData } = this;\n\t\tconst { width, height } = this.mediaDimensions;\n\n\t\tnextCrop.x = clamp(\n\t\t\tevData.cropStartX + evData.xDiff,\n\t\t\t0,\n\t\t\twidth - nextCrop.width\n\t\t);\n\t\tnextCrop.y = clamp(\n\t\t\tevData.cropStartY + evData.yDiff,\n\t\t\t0,\n\t\t\theight - nextCrop.height\n\t\t);\n\n\t\treturn nextCrop;\n\t}\n\n\tresizeCrop() {\n\t\tconst { evData } = this;\n\t\tconst nextCrop = this.makeNewCrop();\n\t\tconst { ord } = evData;\n\n\t\t// On the inverse change the diff so it's the same and\n\t\t// the same algo applies.\n\t\tif (evData.xInversed) {\n\t\t\tevData.xDiff -= evData.cropStartWidth * 2;\n\t\t\tevData.xDiffPc -= evData.cropStartWidth * 2;\n\t\t}\n\t\tif (evData.yInversed) {\n\t\t\tevData.yDiff -= evData.cropStartHeight * 2;\n\t\t\tevData.yDiffPc -= evData.cropStartHeight * 2;\n\t\t}\n\n\t\t// New size.\n\t\tconst newSize = this.getNewSize();\n\n\t\t// Adjust x/y to give illusion of 'staticness' as width/height is increased\n\t\t// when polarity is inversed.\n\t\tlet newX = evData.cropStartX;\n\t\tlet newY = evData.cropStartY;\n\n\t\tif (evData.xCrossOver) {\n\t\t\tnewX = nextCrop.x + (nextCrop.width - newSize.width);\n\t\t}\n\n\t\t// Allows to invert the selected area\n\t\tif (evData.yCrossOver) {\n\t\t\tif (evData.lastYCrossover === false) {\n\t\t\t\tnewY = nextCrop.y - newSize.height;\n\t\t\t} else {\n\t\t\t\tnewY = nextCrop.y + (nextCrop.height - newSize.height);\n\t\t\t}\n\t\t}\n\n\t\tconst { width, height } = this.mediaDimensions;\n\t\tconst containedCrop = containCrop(\n\t\t\tthis.props.crop,\n\t\t\t{\n\t\t\t\tunit: nextCrop.unit,\n\t\t\t\tx: newX,\n\t\t\t\ty: newY,\n\t\t\t\twidth: newSize.width,\n\t\t\t\theight: newSize.height,\n\t\t\t\taspect: nextCrop.aspect,\n\t\t\t},\n\t\t\twidth,\n\t\t\theight\n\t\t);\n\n\t\t// Apply x/y/width/height changes depending on ordinate (fixed aspect always applies both).\n\t\tif (nextCrop.aspect || ReactCrop.xyOrds.indexOf(ord) > -1) {\n\t\t\tnextCrop.x = containedCrop.x;\n\t\t\tnextCrop.y = containedCrop.y;\n\t\t\tnextCrop.width = containedCrop.width;\n\t\t\tnextCrop.height = containedCrop.height;\n\t\t} else if (ReactCrop.xOrds.indexOf(ord) > -1) {\n\t\t\tnextCrop.x = containedCrop.x;\n\t\t\tnextCrop.width = containedCrop.width;\n\t\t} else if (ReactCrop.yOrds.indexOf(ord) > -1) {\n\t\t\tnextCrop.y = containedCrop.y;\n\t\t\tnextCrop.height = containedCrop.height;\n\t\t}\n\n\t\tevData.lastYCrossover = evData.yCrossOver;\n\t\tthis.evData = crossOverCheck(this.evData, this.props);\n\n\t\treturn nextCrop;\n\t}\n\n\tmakeNewCrop(unit = 'px') {\n\t\tconst crop = { ...ReactCrop.defaultCrop, ...this.props.crop };\n\t\tconst { width, height } = this.mediaDimensions;\n\n\t\treturn unit === 'px'\n\t\t\t? convertToPixelCrop(crop, width, height)\n\t\t\t: convertToPercentCrop(crop, width, height);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tchildren,\n\t\t\tcrossorigin,\n\t\t\tcrop,\n\t\t\timageAlt,\n\t\t\tonImageError,\n\t\t\trenderComponent,\n\t\t\tsrc,\n\t\t\tstyle,\n\t\t\timageStyle,\n\t\t\tonImageLoaded,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<CropWrapper\n\t\t\t\tref={n => (this.componentRef = n)}\n\t\t\t\tclassName={'ReactCrop'}\n\t\t\t\tstyle={style}\n\t\t\t\tonMouseDown={this.onComponentMouseDown}\n\t\t\t\ttabIndex='0'>\n\t\t\t\t<div ref={n => (this.mediaWrapperRef = n)}>\n\t\t\t\t\t{renderComponent || (\n\t\t\t\t\t\t<CropImageWrapper\n\t\t\t\t\t\t\tref={r => (this.imageRef = r)}\n\t\t\t\t\t\t\tcrossOrigin={crossorigin}\n\t\t\t\t\t\t\tstyle={imageStyle}\n\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\tonLoad={onImageLoaded}\n\t\t\t\t\t\t\tonError={onImageError}\n\t\t\t\t\t\t\talt={imageAlt}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{children}\n\t\t\t\t{isCropValid(crop) && (\n\t\t\t\t\t<CreateCropSelection\n\t\t\t\t\t\tprops={this.props}\n\t\t\t\t\t\tgetCropStyle={() => this.getCropStyle()}\n\t\t\t\t\t\tonCropAreaMouseDown={this.onCropAreaMouseDown}\n\t\t\t\t\t\thandleChangeSelection={this.handleChangeSelection}\n\t\t\t\t\t\tgetElementOffset={this.getElementOffset}\n\t\t\t\t\t\tmediaDimensions={this.mediaDimensions}\n\t\t\t\t\t\tmouseDownOnCropArea={this.mouseDownOnCropArea}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</CropWrapper>\n\t\t);\n\t}\n}\n\nReactCrop.xOrds = ['e', 'w'];\nReactCrop.yOrds = ['n', 's'];\nReactCrop.xyOrds = ['nw', 'ne', 'se', 'sw'];\n\nReactCrop.nudgeStep = 0.2;\nReactCrop.nudgeStepLarge = 2;\n\nReactCrop.defaultCrop = {\n\tx: 0,\n\ty: 0,\n\twidth: 0,\n\theight: 0,\n\tunit: 'px',\n};\n\nReactCrop.propTypes = {\n\tclassName: PropTypes.string,\n\tchildren: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.node),\n\t\tPropTypes.node,\n\t]),\n\tcircularCrop: PropTypes.bool,\n\tcrop: PropTypes.shape({\n\t\taspect: PropTypes.number,\n\t\tx: PropTypes.number,\n\t\ty: PropTypes.number,\n\t\twidth: PropTypes.number,\n\t\theight: PropTypes.number,\n\t\tunit: PropTypes.oneOf(['px', '%']),\n\t}),\n\tcrossorigin: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\tlocked: PropTypes.bool,\n\timageAlt: PropTypes.string,\n\timageStyle: PropTypes.shape({}),\n\tkeepSelection: PropTypes.bool,\n\tminWidth: PropTypes.number,\n\tminHeight: PropTypes.number,\n\tmaxWidth: PropTypes.number,\n\tmaxHeight: PropTypes.number,\n\tonChange: PropTypes.func.isRequired,\n\tonImageError: PropTypes.func,\n\tonComplete: PropTypes.func,\n\tonImageLoaded: PropTypes.func,\n\tonDragStart: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tsrc: PropTypes.string.isRequired,\n\tstyle: PropTypes.shape({}),\n\trenderComponent: PropTypes.node,\n\trenderSelectionAddon: PropTypes.func,\n\truleOfThirds: PropTypes.bool,\n};\n\nReactCrop.defaultProps = {\n\tcircularCrop: false,\n\tclassName: undefined,\n\tcrop: undefined,\n\tcrossorigin: undefined,\n\tdisabled: false,\n\tlocked: false,\n\timageAlt: '',\n\tmaxWidth: undefined,\n\tmaxHeight: undefined,\n\tminWidth: 0,\n\tminHeight: 0,\n\tkeepSelection: false,\n\tonComplete: () => {},\n\tonImageError: () => {},\n\tonImageLoaded: () => {},\n\tonDragStart: () => {},\n\tonDragEnd: () => {},\n\tchildren: undefined,\n\tstyle: undefined,\n\trenderComponent: undefined,\n\timageStyle: undefined,\n\trenderSelectionAddon: undefined,\n\truleOfThirds: false,\n};\n\nexport { ReactCrop as default, ReactCrop as Component, containCrop };\n","import ReactDOM from 'react-dom';\nimport React, { PureComponent } from 'react';\nimport ReactCrop from './image-crop';\nimport './image-crop.css';\n\nimport './App.css';\n\nclass App extends PureComponent {\n\tstate = {\n\t\tsrc: null,\n\t\tcrop: {\n\t\t\t// unit: '%',\n\t\t\t// width: 30,\n\t\t\t// aspect: 16 / 9,\n\t\t},\n\t};\n\n\tonSelectFile = e => {\n\t\tif (e.target.files && e.target.files.length > 0) {\n\t\t\tconst reader = new FileReader();\n\t\t\treader.addEventListener('load', () =>\n\t\t\t\tthis.setState({ src: reader.result })\n\t\t\t);\n\t\t\treader.readAsDataURL(e.target.files[0]);\n\t\t}\n\t};\n\n\t// If you setState the crop in here you should return false.\n\tonImageLoaded = e => {\n\t\tthis.imageRef = e.target;\n\t};\n\n\tonCropComplete = crop => {\n\t\tthis.makeClientCrop(crop);\n\t};\n\n\tonCropChange = (crop, percentCrop) => {\n\t\t// You could also use percentCrop:\n\t\t// this.setState({ crop: percentCrop });\n\t\tthis.setState({ crop });\n\t};\n\n\tasync makeClientCrop(crop) {\n\t\tif (this.imageRef && crop.width && crop.height) {\n\t\t\tconst croppedImageUrl = await this.getCroppedImg(\n\t\t\t\tthis.imageRef,\n\t\t\t\tcrop,\n\t\t\t\t'newFile.jpeg'\n\t\t\t);\n\t\t\tthis.setState({ croppedImageUrl });\n\t\t}\n\t}\n\n\tgetCroppedImg(image, crop, fileName) {\n\t\tconst canvas = document.createElement('canvas');\n\t\tconst scaleX = image.naturalWidth / image.width;\n\t\tconst scaleY = image.naturalHeight / image.height;\n\t\tcanvas.width = crop.width;\n\t\tcanvas.height = crop.height;\n\t\tconst ctx = canvas.getContext('2d');\n\n\t\tctx.drawImage(\n\t\t\timage,\n\t\t\tcrop.x * scaleX,\n\t\t\tcrop.y * scaleY,\n\t\t\tcrop.width * scaleX,\n\t\t\tcrop.height * scaleY,\n\t\t\t0,\n\t\t\t0,\n\t\t\tcrop.width,\n\t\t\tcrop.height\n\t\t);\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tcanvas.toBlob(blob => {\n\t\t\t\tif (!blob) {\n\t\t\t\t\t//reject(new Error('Canvas is empty'));\n\t\t\t\t\tconsole.error('Canvas is empty');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tblob.name = fileName;\n\t\t\t\twindow.URL.revokeObjectURL(this.fileUrl);\n\t\t\t\tthis.fileUrl = window.URL.createObjectURL(blob);\n\t\t\t\tresolve(this.fileUrl);\n\t\t\t}, 'image/jpeg');\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { crop, croppedImageUrl, src } = this.state;\n\n\t\treturn (\n\t\t\t<div className='App'>\n\t\t\t\t<div>\n\t\t\t\t\t<input type='file' accept='image/*' onChange={this.onSelectFile} />\n\t\t\t\t</div>\n\t\t\t\t{src && (\n\t\t\t\t\t<ReactCrop\n\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\tcrop={crop}\n\t\t\t\t\t\truleOfThirds\n\t\t\t\t\t\tonImageLoaded={this.onImageLoaded}\n\t\t\t\t\t\tonComplete={this.onCropComplete}\n\t\t\t\t\t\tonChange={this.onCropChange}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{croppedImageUrl && (\n\t\t\t\t\t<img alt='Crop' style={{ maxWidth: '100%' }} src={croppedImageUrl} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}